<div style="width: 35rem;">
    <form action="/admin/edit-coupon/<%= coupon._id %>" method="POST">
        <div class="row mb-3">
            <label for="couponName" class="col-sm-3 col-form-label">Coupon Name</label>
            <div class="col-sm-9">
                <input type="text" required value="<%= coupon.couponName %>" name="couponName" class="form-control"
                    id="couponName">
            </div>
        </div>
        <div class="row mb-3">
            <label for="couponCode" class="col-sm-3 col-form-label">Coupon Code</label>
            <div class="col-sm-9">
                <input type="text" required value="<%= coupon.couponCode %>" name="couponCode" class="form-control"
                    id="couponCode">
            </div>
        </div>
        <div class="row mb-3">
            <label for="validity" class="col-sm-3 col-form-label">Validity</label>
            <div class="col-sm-9">
                <input type="date" required value="<%= coupon.validity %>" name="validity" class="form-control" id="validity">
            </div>
        </div>
        <div class="row mb-3">
            <label for="minAmount" class="col-sm-3 col-form-label">Min Purchase</label>
            <div class="col-sm-9">
                <input type="text" required value="<%= coupon.minPurchase %>" name="minAmount" class="form-control"
                    id="minAmount"  onkeyup="return validateValue('minAmount','min-amount-error')">
                    <span id="min-amount-error" style="color: red; font-size: 12px; margin-top: 5px;"></span>
            </div>
        </div>
        <div class="row mb-3">
            <label for="discount" class="col-sm-3 col-form-label">Discount(%)</label>
            <div class="col-sm-9">
                <input type="text" required value="<%= coupon.discount %>" name="discount" class="form-control" id="discount" onkeyup="return validateValue('discount','discount-error')">
                <span id="discount-error" style="color: red; font-size: 12px; margin-top: 5px;"></span>
            </div>
        </div>
        <div class="row mb-3">
            <label for="maxDiscount" class="col-sm-3 col-form-label">Max Discount</label>
            <div class="col-sm-9">
                <input type="text" required value="<%= coupon.maxDiscount %>" name="maxDiscount" class="form-control"
                    id="maxDiscount"  onkeyup="return validateValue('maxDiscount','max-discount-error')">
                    <span id="max-discount-error" style="color: red; font-size: 12px; margin-top: 5px;"></span>
            </div>
        </div>
        <div class="row mb-3">
            <label for="description" class="col-sm-3 col-form-label">Description</label>
            <div class="col-sm-9">
                <textarea type="text" required name="description" class="form-control" id="description"
                    style="height: 7.5rem;"><%= coupon.description %></textarea>
            </div>
        </div>
        <div class="row mb-3">
            <label for="couponStatus" class="col-sm-3 col-form-label">Coupon Status</label>
            <div class="col-sm-9">
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="couponStatus" id="couponStatusTrue" value="true" <%= coupon.isActive ? 'checked' : '' %>>
                    <label class="form-check-label" for="couponStatusTrue">True</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input"  type="radio" name="couponStatus" id="couponStatusFalse" value="false" <%= !coupon.isActive ? 'checked' : '' %>>
                    <label class="form-check-label" for="couponStatusFalse">False</label>
                </div>
            </div>
        </div>
        <button type="submit" class="btn btn-primary" style="float: right;">Update Coupon</button>
    </form>
</div>




<script>
    const date = new Date("<%= coupon.validity %>");
    const formattedDate = date.toISOString().substr(0, 10);
    document.getElementById("validity").value = formattedDate;

    function validateValue(inputId, errorId) {
    const regPrice = /^[1-9][0-9]*$/;
    const price = document.getElementById(inputId).value;
    if (!regPrice.test(price)) {
        document.getElementById(errorId).innerHTML = 'Value should be greater than zero.';
        return false;
    } else {
        document.getElementById(errorId).innerHTML = '';
        return true;
    }
}



</script>